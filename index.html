<!doctype html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>DarkSurvival ‚Äî –ú–∞–≥–∞–∑–∏–Ω</title>
  <style>
    :root{
      --bg: #f6efe6;
      --panel: #efe3d6;
      --text: #2a1c14;
      --muted:#7b5c4f;
      --accent:#c5461f;
      --btnGrad: linear-gradient(135deg, #5a2a16 0%, #b13a1b 55%, #6a2416 100%);
      --card:#fff7ef;
      --shadow: 0 14px 30px rgba(38,16,10,.18);
      --radius: 18px;
      --border: rgba(123,92,79,.30);
    }

    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      background: var(--bg);
      color: var(--text);
    }

    .topbar{
      height: 56px;
      background: #2b2b2b;
      color:#fff;
      display:flex;
      align-items:center;
      padding: 0 14px;
      gap: 10px;
      position: sticky;
      top:0;
      z-index: 5;
    }
    .topbar .x{
      width: 34px; height:34px;
      border-radius: 10px;
      display:grid; place-items:center;
      background: rgba(255,255,255,.08);
      cursor:pointer;
      user-select:none;
    }
    .topbar .title{
      display:flex; align-items:center; gap:8px;
      font-weight: 800;
      letter-spacing:.2px;
      font-size: 16px;
      flex:1;
      opacity:.95;
    }
    .topbar .actions{
      display:flex; gap:10px; align-items:center;
      opacity: .95;
      user-select:none;
    }
    .dot{width:4px;height:4px;border-radius:99px;background:#fff;opacity:.9}

    .wrap{
      max-width: 980px;
      margin: 0 auto;
      padding: 16px 14px 96px;
    }

    .hero{
      text-align:center;
      padding: 10px 6px 8px;
    }
    .hero h1{
      margin: 10px 0 6px;
      font-size: 34px;
      line-height: 1.05;
      color: var(--accent);
      font-weight: 1000;
      letter-spacing: .2px;
    }
    .hero .sub{
      color: var(--muted);
      font-weight: 800;
      font-size: 15px;
      margin-top: 2px;
    }

    .bar{
      display:flex;
      align-items:center;
      justify-content: space-between;
      gap: 12px;
      margin: 8px 0 10px;
    }
    .back{
      display:inline-flex;
      align-items:center;
      gap: 10px;
      padding: 12px 16px;
      border-radius: 14px;
      background: var(--btnGrad);
      color:#fff;
      border:0;
      font-weight:900;
      cursor:pointer;
      box-shadow: var(--shadow);
    }
    .back.hidden{display:none}

    .catHint{
      text-align:center;
      color: var(--accent);
      font-weight: 1000;
      font-size: 22px;
      margin: 12px 0 2px;
    }

    .catList{
      display:grid;
      gap: 14px;
      margin-top: 10px;
    }
    .catBtn{
      width: 100%;
      padding: 20px 18px;
      border-radius: 18px;
      background: var(--btnGrad);
      color:#fff;
      border:0;
      font-weight: 1000;
      font-size: 20px;
      cursor:pointer;
      box-shadow: var(--shadow);
      transition: transform .08s ease, filter .08s ease;
    }
    .catBtn:active{transform: scale(.99); filter: brightness(.98)}

    .sectionTitle{
      display:flex; align-items:center; gap:10px;
      color: var(--accent);
      font-weight: 1000;
      font-size: 28px;
      margin: 10px 0 10px;
    }
    .sectionTitle.hidden{display:none}

    /* ====== –ö–∞—Ä—Ç–æ—á–∫–∏: –ø–æ–ø—Ä–∞–≤–∏–ª —Ä–∞–º–∫–∏/–≤—ã—Å–æ—Ç—É/—Ç–µ–∫—Å—Ç ====== */
    .grid{
      display:grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 14px;
      margin-top: 12px;
    }
    .grid.hidden{display:none}

    .card{
      background: var(--card);
      border-radius: 18px;
      border: 2px solid var(--border);
      box-shadow: 0 12px 24px rgba(38,16,10,.12);
      overflow:hidden;
      display:flex;
      flex-direction:column;
      min-height: 290px; /* –≥–ª–∞–≤–Ω–æ–µ ‚Äî —á—Ç–æ–±—ã —Ç–µ–∫—Å—Ç –≤–ª–µ–∑–∞–ª */
    }
    .thumb{
      height: 150px;
      background: linear-gradient(135deg, rgba(197,70,31,.12), rgba(123,42,24,.12));
      display:grid;
      place-items:center;
      font-size: 52px;
    }
    .cardBody{
      padding: 12px 12px 14px;
      display:flex;
      flex-direction:column;
      gap: 8px;
      flex:1;
      min-height: 140px;
    }
    .name{
      font-weight: 1000;
      font-size: 16px;
      line-height: 1.15;
      color: #2c1a12;
      word-break: break-word;
    }
    .desc{
      color: #4a2f24;
      font-weight: 700;
      font-size: 13px;
      line-height: 1.28;
      opacity: .95;
      display: -webkit-box;
      -webkit-line-clamp: 3;   /* –∫—Ä–∞—Å–∏–≤–æ: –º–∞–∫—Å–∏–º—É–º 3 —Å—Ç—Ä–æ–∫–∏ */
      -webkit-box-orient: vertical;
      overflow: hidden;
      word-break: break-word;
      min-height: 50px; /* —á—Ç–æ–±—ã –Ω–∏–∑ –Ω–µ –ø—Ä—ã–≥–∞–ª */
    }
    .price{
      font-weight: 1000;
      color: var(--accent);
      font-size: 18px;
      margin-top: auto;
    }
    .addRow{
      display:flex;
      gap: 10px;
      margin-top: 8px;
    }
    .miniBtn{
      flex:1;
      border-radius: 14px;
      border:0;
      padding: 10px 12px;
      font-weight: 1000;
      cursor:pointer;
    }
    .miniBtn.primary{
      background: var(--btnGrad);
      color:#fff;
    }
    .miniBtn.ghost{
      background: transparent;
      border: 2px solid rgba(123,92,79,.35);
      color:#3a231a;
    }

    .cartFab{
      position: fixed;
      right: 14px;
      bottom: 18px;
      display:flex;
      align-items:center;
      gap: 10px;
      padding: 14px 16px;
      border-radius: 999px;
      background: var(--btnGrad);
      color:#fff;
      border:0;
      box-shadow: var(--shadow);
      font-weight: 1000;
      cursor:pointer;
      z-index: 6;
    }
    .badge{
      min-width: 24px;
      height: 24px;
      border-radius: 999px;
      background: rgba(255,255,255,.18);
      display:grid;
      place-items:center;
      font-size: 13px;
      font-weight: 1000;
      padding: 0 8px;
    }

    .overlay{
      position: fixed;
      inset:0;
      background: rgba(0,0,0,.35);
      display:none;
      align-items:center;
      justify-content:center;
      padding: 18px;
      z-index: 20;
    }
    .overlay.show{display:flex}
    .modal{
      width: min(540px, 96vw);
      background: var(--panel);
      border-radius: 16px;
      border: 2px solid rgba(123,92,79,.35);
      box-shadow: 0 20px 40px rgba(0,0,0,.25);
      overflow:hidden;
    }
    .modalHead{
      display:flex;
      align-items:center;
      justify-content:space-between;
      padding: 14px 14px;
      border-bottom: 1px solid rgba(123,92,79,.25);
    }
    .modalHead h3{
      margin:0;
      font-size: 20px;
      font-weight: 1000;
    }
    .closeX{
      width: 36px; height:36px;
      border-radius: 12px;
      border:0;
      cursor:pointer;
      background: rgba(0,0,0,.08);
      font-weight: 1000;
    }
    .modalBody{
      padding: 14px;
    }
    .empty{
      text-align:center;
      color: var(--accent);
      font-weight: 1000;
      margin: 6px 0 10px;
    }
    .total{
      text-align:center;
      font-weight: 1000;
      font-size: 22px;
      margin: 10px 0 8px;
    }
    .note{
      text-align:center;
      color: var(--muted);
      font-weight: 800;
      font-size: 13px;
      margin: 0 0 10px;
    }
    .cartList{
      display:flex;
      flex-direction:column;
      gap:10px;
      margin: 12px 0 12px;
    }
    .cartItem{
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:10px;
      padding: 10px 10px;
      background: rgba(255,255,255,.55);
      border-radius: 14px;
      border: 1px solid rgba(123,92,79,.25);
    }
    .cartItem .left{
      display:flex;
      flex-direction:column;
      gap:2px;
      min-width: 0;
    }
    .cartItem .left b{
      font-weight:1000;
      overflow:hidden;
      text-overflow:ellipsis;
      white-space:nowrap;
      max-width: 290px;
    }
    .cartItem small{color: var(--muted); font-weight: 800}
    .qty{
      display:flex;
      align-items:center;
      gap: 8px;
      flex-shrink: 0;
    }
    .qty button{
      width: 32px; height:32px;
      border-radius: 10px;
      border:0;
      background: rgba(0,0,0,.08);
      font-weight: 1000;
      cursor:pointer;
    }
    .modalActions{
      display:flex;
      gap: 12px;
      justify-content:center;
      padding: 12px 14px 16px;
      border-top: 1px solid rgba(123,92,79,.25);
    }
    .actionBtn{
      min-width: 170px;
      border-radius: 12px;
      border:0;
      padding: 12px 14px;
      font-weight: 1000;
      cursor:pointer;
    }
    .actionBtn.gray{
      background: #80858b;
      color:#fff;
    }
    .actionBtn.orange{
      background: var(--btnGrad);
      color:#fff;
    }

    @media (min-width: 760px){
      .catList{grid-template-columns: repeat(3, 1fr);}
      .grid{grid-template-columns: repeat(3, 1fr);}
      .card{min-height: 300px;}
    }
    @media (min-width: 980px){
      .grid{grid-template-columns: repeat(4, 1fr);}
    }
  </style>
</head>

<body>
  <div class="topbar">
    <div class="x" title="–ó–∞–∫—Ä—ã—Ç—å">‚úï</div>
    <div class="title">üü™ <span>darksurvival</span></div>
    <div class="actions" title="–ú–µ–Ω—é">
      <span class="dot"></span><span class="dot"></span><span class="dot"></span>
    </div>
  </div>

  <div class="wrap">
    <div class="hero">
      <div style="display:flex;justify-content:center;gap:10px;align-items:center;">
        <button class="back hidden" id="backBtn">‚Üê –ù–∞–∑–∞–¥</button>
      </div>
      <h1>üü™ –ú–∞–≥–∞–∑–∏–Ω<br/>DarkSurvival</h1>
      <div class="sub">–î–æ–Ω–∞—Ç, –∫–µ–π—Å—ã –∏ –ø–æ–ª–µ–∑–Ω—ã–µ —à—Ç—É–∫–∏ –¥–ª—è —Å–µ—Ä–≤–µ—Ä–∞</div>
    </div>

    <div id="home">
      <div class="catHint">–í—ã–±–µ—Ä–∏—Ç–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—é:</div>
      <div class="catList" id="catList"></div>
    </div>

    <div class="sectionTitle hidden" id="sectionTitle">–ö–∞—Ç–µ–≥–æ—Ä–∏—è</div>
    <div class="grid hidden" id="grid"></div>
  </div>

  <button class="cartFab" id="cartBtn">
    üõí –ö–æ—Ä–∑–∏–Ω–∞ <span class="badge" id="cartCount">0</span>
  </button>

  <div class="overlay" id="overlay">
    <div class="modal" role="dialog" aria-modal="true">
      <div class="modalHead">
        <h3>üõí –í–∞—à–∞ –∫–æ—Ä–∑–∏–Ω–∞</h3>
        <button class="closeX" id="closeCart">‚úï</button>
      </div>
      <div class="modalBody">
        <div class="empty" id="emptyText">–ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞</div>
        <div class="cartList" id="cartList"></div>

        <div class="total" id="totalText">–ò—Ç–æ–≥–æ: 0‚ÇΩ</div>
        <div class="note">–ù–∞–∂–º–∏—Ç–µ ¬´–û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑¬ª ‚Äî –æ—Ç–∫—Ä–æ–µ—Ç—Å—è Telegram –∏ —Å–æ–æ–±—â–µ–Ω–∏–µ —É–∂–µ –±—É–¥–µ—Ç –≥–æ—Ç–æ–≤–æ.</div>
      </div>
      <div class="modalActions">
        <button class="actionBtn gray" id="closeBtn">–ó–∞–∫—Ä—ã—Ç—å</button>
        <button class="actionBtn orange" id="checkoutBtn">–û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑</button>
      </div>
    </div>
  </div>

  <script>
    // ===== –ù–ê–°–¢–†–û–ô–ö–ò =====
    const SALES_USERNAME = "SalesManagerX"; // @SalesManagerX

    // ===== –î–ê–ù–ù–´–ï =====
    const CATEGORIES = [
      { id: "ranks", title: "–ü—Ä–∏–≤–∏–ª–µ–≥–∏–∏", icon: "üëë" },
      { id: "cases", title: "–ö–µ–π—Å—ã",      icon: "üéÅ" },
      { id: "other", title: "–ü—Ä–æ—á–µ–µ",     icon: "üß∞" }
    ];

    const PRODUCTS = {
      ranks: [
        {
          id:"vip",
          name:"VIP",
          price: 199,
          emoji:"üü©",
          desc:"–°—Ç–∞—Ä—Ç–æ–≤–∞—è –ø—Ä–∏–≤–∏–ª–µ–≥–∏—è: –±–∞–∑–æ–≤—ã–µ –∫–æ–º–∞–Ω–¥—ã, –ø—Ä–∏—è—Ç–Ω—ã–µ –±–æ–Ω—É—Å—ã –∏ –Ω–µ–º–Ω–æ–≥–æ —É–¥–æ–±—Å—Ç–≤–∞ –Ω–∞ –∫–∞–∂–¥—ã–π –¥–µ–Ω—å."
        },
        {
          id:"platinum",
          name:"PLATINUM",
          price: 399,
          emoji:"‚¨ú",
          desc:"–£—Å–∏–ª–µ–Ω–Ω–∞—è –ø—Ä–∏–≤–∏–ª–µ–≥–∏—è: –±–æ–ª—å—à–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π, —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã –∏ –≤–∫—É—Å–Ω—ã–µ –ø–ª—é—à–∫–∏."
        },
        {
          id:"void",
          name:"VOID",
          price: 699,
          emoji:"üü™",
          desc:"–¢–æ–ø–æ–≤—ã–π —É—Ä–æ–≤–µ–Ω—å: –º–∞–∫—Å–∏–º—É–º —É–¥–æ–±—Å—Ç–≤–∞, –∑–∞–º–µ—Ç–Ω—ã–π —Å—Ç–∞—Ç—É—Å –∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π –Ω–∞–±–æ—Ä –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π."
        },
        {
          id:"luxe",
          name:"LUXE",
          price: 999,
          emoji:"üíé",
          desc:"–ü—Ä–µ–º–∏—É–º-–¥–æ—Å—Ç—É–ø: –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–µ –±–æ–Ω—É—Å—ã, –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –∏ –∫—Ä–∞—Å–∏–≤—ã–π —Å—Ç–∏–ª—å –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ."
        },
        {
          id:"dark",
          name:"DARK",
          price: 1499,
          emoji:"üåë",
          desc:"–≠–ª–∏—Ç–Ω–∞—è –ø—Ä–∏–≤–∏–ª–µ–≥–∏—è: —É–ª—å—Ç—Ä–∞-—Å—Ç–∞—Ç—É—Å, —à–∏—Ä–æ–∫–∏–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –∏ –∂–∏—Ä–Ω—ã–µ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞."
        },
      ],

      cases: [
        {
          id:"case_starter",
          name:"–ö–µ–π—Å: Starter",
          price: 149,
          emoji:"üéÅ",
          desc:"–õ—É—Ç –¥–ª—è —Ä–∞–∑–≥–æ–Ω–∞ –Ω–∞ —Å—Ç–∞—Ä—Ç–µ: —Ä–µ—Å—É—Ä—Å—ã –∏ –ø–æ–ª–µ–∑–Ω—ã–µ –ø—Ä–µ–¥–º–µ—Ç—ã, —á—Ç–æ–±—ã –±—ã—Å—Ç—Ä–æ –≤–∫–∞—Ç–∏—Ç—å—Å—è."
        },
        {
          id:"case_lucky",
          name:"–ö–µ–π—Å: Lucky",
          price: 299,
          emoji:"üçÄ",
          desc:"–®–∞–Ω—Å –Ω–∞ —Ä–µ–¥–∫–∏–π –ª—É—Ç: –±–æ–ª—å—à–µ –≤–∫—É—Å–Ω—è—à–µ–∫ –∏ –ø—Ä–∏—è—Ç–Ω—ã–µ –Ω–∞—Ö–æ–¥–∫–∏ –¥–ª—è –∏–≥—Ä—ã."
        },
        {
          id:"case_ultra",
          name:"–ö–µ–π—Å: Ultra",
          price: 499,
          emoji:"üî•",
          desc:"–°–µ—Ä—å—ë–∑–Ω—ã–π –¥—Ä–æ–ø: –ø–æ–≤—ã—à–µ–Ω–Ω—ã–µ —à–∞–Ω—Å—ã –Ω–∞ —Ç–æ–ø–æ–≤—ã–µ –ø—Ä–µ–¥–º–µ—Ç—ã –∏ —Ä–µ–¥–∫–æ—Å—Ç–∏."
        },
        {
          id:"case_void",
          name:"–ö–µ–π—Å: Void",
          price: 799,
          emoji:"üü£",
          desc:"–°–∞–º—ã–π –∂–∏—Ä–Ω—ã–π –∫–µ–π—Å: —Ä–µ–¥—á–∞–π—à–∏–µ –ø—Ä–µ–¥–º–µ—Ç—ã –∏ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –∫—Ä—É—Ç—ã–µ –ø—Ä–∏–∑—ã."
        },
      ],

      other: [
        {
          id:"unban",
          name:"–†–∞–∑–±–∞–Ω",
          price: 1999,
          emoji:"üßæ",
          desc:"–°–Ω—è—Ç–∏–µ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ (–µ—Å–ª–∏ —Å–ª—É—á–∞–π/–æ—à–∏–±–∫–∞). –ò—Ç–æ–≥ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –ø—Ä–∏—á–∏–Ω—ã –∏ —Ä–µ—à–µ–Ω–∏—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ü–∏–∏."
        },
        {
          id:"nickname",
          name:"–°–º–µ–Ω–∞ –Ω–∏–∫–∞",
          price: 299,
          emoji:"‚úçÔ∏è",
          desc:"–ú–µ–Ω—è–µ–º –Ω–∏–∫ –±—ã—Å—Ç—Ä–æ –∏ –∞–∫–∫—É—Ä–∞—Ç–Ω–æ. –£–∫–∞–∂–∏ –∂–µ–ª–∞–µ–º—ã–π –Ω–∏–∫ –≤ —Å–æ–æ–±—â–µ–Ω–∏–∏ –ø—Ä–∏ –∑–∞–∫–∞–∑–µ."
        },
        {
          id:"color_nick",
          name:"–¶–≤–µ—Ç–Ω–æ–π –Ω–∏–∫",
          price: 399,
          emoji:"üåà",
          desc:"–°—Ç–∏–ª—å–Ω—ã–π —Ü–≤–µ—Ç–Ω–æ–π –Ω–∏–∫/—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (–µ—Å–ª–∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ)."
        },
        {
          id:"shulker",
          name:"–®–∞–ª–∫–µ—Ä-–±–æ–∫—Å (1 —à—Ç.)",
          price: 149,
          emoji:"üì¶",
          desc:"–£–¥–æ–±–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –¥–ª—è –ª—É—Ç–∞. –ü–æ–ª—É—á–∏—à—å –ø—Ä–µ–¥–º–µ—Ç –ø—Ä—è–º–æ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ."
        },
      ]
    };

    // ===== UI / –õ–û–ì–ò–ö–ê =====
    const catListEl = document.getElementById("catList");
    const gridEl = document.getElementById("grid");
    const sectionTitleEl = document.getElementById("sectionTitle");
    const backBtn = document.getElementById("backBtn");
    const homeEl = document.getElementById("home");

    const overlay = document.getElementById("overlay");
    const cartBtn = document.getElementById("cartBtn");
    const closeCart = document.getElementById("closeCart");
    const closeBtn = document.getElementById("closeBtn");
    const checkoutBtn = document.getElementById("checkoutBtn");
    const cartCountEl = document.getElementById("cartCount");
    const cartList = document.getElementById("cartList");
    const emptyText = document.getElementById("emptyText");
    const totalText = document.getElementById("totalText");

    let currentCategory = null;
    const cart = new Map(); // productId -> { product, qty }

    function money(n){
      return new Intl.NumberFormat("ru-RU").format(n) + "‚ÇΩ";
    }

    function renderCategories(){
      catListEl.innerHTML = "";
      CATEGORIES.forEach(c => {
        const btn = document.createElement("button");
        btn.className = "catBtn";
        btn.textContent = c.title;
        btn.addEventListener("click", () => openCategory(c.id));
        catListEl.appendChild(btn);
      });
    }

    function openCategory(catId){
      currentCategory = catId;

      homeEl.style.display = "none";
      backBtn.classList.remove("hidden");
      sectionTitleEl.classList.remove("hidden");
      gridEl.classList.remove("hidden");

      const c = CATEGORIES.find(x => x.id === catId);
      sectionTitleEl.textContent = `${c?.icon || "üì¶"} ${c?.title || "–ö–∞—Ç–µ–≥–æ—Ä–∏—è"}`;

      renderProducts(catId);
    }

    function goHome(){
      currentCategory = null;
      homeEl.style.display = "";
      backBtn.classList.add("hidden");
      sectionTitleEl.classList.add("hidden");
      gridEl.classList.add("hidden");
      gridEl.innerHTML = "";
    }

    function renderProducts(catId){
      const list = PRODUCTS[catId] || [];
      gridEl.innerHTML = "";

      list.forEach(p => {
        const card = document.createElement("div");
        card.className = "card";

        const thumb = document.createElement("div");
        thumb.className = "thumb";
        thumb.textContent = p.emoji || "üß±";

        const body = document.createElement("div");
        body.className = "cardBody";

        const name = document.createElement("div");
        name.className = "name";
        name.textContent = p.name;

        const desc = document.createElement("div");
        desc.className = "desc";
        desc.textContent = p.desc || "–û–ø–∏—Å–∞–Ω–∏–µ —Å–∫–æ—Ä–æ –ø–æ—è–≤–∏—Ç—Å—è.";

        const price = document.createElement("div");
        price.className = "price";
        price.textContent = money(p.price);

        const row = document.createElement("div");
        row.className = "addRow";

        const info = document.createElement("button");
        info.className = "miniBtn ghost";
        info.textContent = "–ü–æ–¥—Ä–æ–±–Ω–µ–µ";
        info.addEventListener("click", () => {
          alert(`${p.name}\n\n${p.desc}\n\n–¶–µ–Ω–∞: ${money(p.price)}`);
        });

        const add = document.createElement("button");
        add.className = "miniBtn primary";
        add.textContent = "–í –∫–æ—Ä–∑–∏–Ω—É";
        add.addEventListener("click", () => addToCart(p));

        row.appendChild(info);
        row.appendChild(add);

        body.appendChild(name);
        body.appendChild(desc);
        body.appendChild(price);
        body.appendChild(row);

        card.appendChild(thumb);
        card.appendChild(body);
        gridEl.appendChild(card);
      });
    }

    function addToCart(product){
      const existing = cart.get(product.id);
      if(existing) existing.qty += 1;
      else cart.set(product.id, { product, qty: 1 });
      updateCartBadge();
    }

    function updateCartBadge(){
      let count = 0;
      cart.forEach(v => count += v.qty);
      cartCountEl.textContent = count;
    }

    function openCart(){
      renderCart();
      overlay.classList.add("show");
    }
    function closeCartModal(){
      overlay.classList.remove("show");
    }

    function renderCart(){
      cartList.innerHTML = "";
      let total = 0;

      emptyText.style.display = (cart.size === 0) ? "" : "none";

      cart.forEach(({product, qty}) => {
        total += product.price * qty;

        const item = document.createElement("div");
        item.className = "cartItem";

        const left = document.createElement("div");
        left.className = "left";
        left.innerHTML = `<b>${product.name}</b><small>${money(product.price)} –∑–∞ —à—Ç.</small>`;

        const right = document.createElement("div");
        right.className = "qty";

        const minus = document.createElement("button");
        minus.textContent = "‚àí";
        minus.addEventListener("click", () => {
          const v = cart.get(product.id);
          v.qty -= 1;
          if(v.qty <= 0) cart.delete(product.id);
          updateCartBadge();
          renderCart();
        });

        const q = document.createElement("b");
        q.textContent = qty;

        const plus = document.createElement("button");
        plus.textContent = "+";
        plus.addEventListener("click", () => {
          cart.get(product.id).qty += 1;
          updateCartBadge();
          renderCart();
        });

        right.appendChild(minus);
        right.appendChild(q);
        right.appendChild(plus);

        item.appendChild(left);
        item.appendChild(right);
        cartList.appendChild(item);
      });

      totalText.textContent = "–ò—Ç–æ–≥–æ: " + money(total);
    }

    function buildTelegramMessage(){
      let total = 0;
      const lines = [];

      cart.forEach(({product, qty}) => {
        const sum = product.price * qty;
        total += sum;
        lines.push(`‚Ä¢ ${product.name} x${qty} ‚Äî ${money(sum)}`);
      });

      // –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å —Å—é–¥–∞ –Ω–∏–∫ –∏–≥—Ä–æ–∫–∞/—Å–µ—Ä–≤–µ—Ä –∞–π–ø–∏, –∫–æ–≥–¥–∞ –±—É–¥–µ—à—å –≥–æ—Ç–æ–≤
      const text =
`üü™ DarkSurvival ‚Äî –∑–∞–∫–∞–∑
${lines.join("\n")}

–ò—Ç–æ–≥–æ: ${money(total)}
–ù–∏–∫ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ: (—É–∫–∞–∂–∏)
–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π: (–µ—Å–ª–∏ –µ—Å—Ç—å)`;

      return text;
    }

    function openTelegramChatWithText(username, text){
      const url = `https://t.me/${encodeURIComponent(username)}?text=${encodeURIComponent(text)}`;
      // –í –º–∏–Ω–∏-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –∏ –Ω–∞ –º–æ–±–∏–ª–µ —Ç–∞–∫ –æ–±—ã—á–Ω–æ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –Ω–æ—Ä–º:
      window.open(url, "_blank");
    }

    // Events
    backBtn.addEventListener("click", goHome);
    cartBtn.addEventListener("click", openCart);
    closeCart.addEventListener("click", closeCartModal);
    closeBtn.addEventListener("click", closeCartModal);
    overlay.addEventListener("click", (e) => {
      if(e.target === overlay) closeCartModal();
    });

    checkoutBtn.addEventListener("click", () => {
      if(cart.size === 0){
        alert("–ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞ üôÇ");
        return;
      }
      const msg = buildTelegramMessage();
      openTelegramChatWithText(SALES_USERNAME, msg);
    });

    // Init
    renderCategories();
    goHome();
    updateCartBadge();
  </script>
</body>
    </html>
