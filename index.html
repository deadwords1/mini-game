<!doctype html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>DarkSurvival ‚Äî –ú–∞–≥–∞–∑–∏–Ω</title>
  <style>
    :root{
      --bg: #f6efe6;
      --panel: #efe3d6;
      --text: #2a1c14;
      --muted:#7b5c4f;
      --accent:#c5461f;
      --accent2:#7b2a18;
      --btnGrad: linear-gradient(135deg, #5a2a16 0%, #b13a1b 55%, #6a2416 100%);
      --card:#fff7ef;
      --shadow: 0 14px 30px rgba(38,16,10,.18);
      --radius: 18px;
    }

    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      background: var(--bg);
      color: var(--text);
    }

    /* Top bar (–∫–∞–∫ –≤ –º–∏–Ω–∏-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏) */
    .topbar{
      height: 56px;
      background: #2b2b2b;
      color:#fff;
      display:flex;
      align-items:center;
      padding: 0 14px;
      gap: 10px;
      position: sticky;
      top:0;
      z-index: 5;
    }
    .topbar .x{
      width: 34px; height:34px;
      border-radius: 10px;
      display:grid; place-items:center;
      background: rgba(255,255,255,.08);
      cursor:pointer;
      user-select:none;
    }
    .topbar .title{
      display:flex; align-items:center; gap:8px;
      font-weight: 700;
      letter-spacing:.2px;
      font-size: 16px;
      flex:1;
    }
    .topbar .title span{opacity:.95}
    .topbar .actions{
      display:flex; gap:10px; align-items:center;
      opacity: .95;
      user-select:none;
    }
    .dot{width:4px;height:4px;border-radius:99px;background:#fff;opacity:.9}

    .wrap{
      max-width: 980px;
      margin: 0 auto;
      padding: 16px 14px 90px;
    }

    /* Header */
    .hero{
      text-align:center;
      padding: 10px 6px 8px;
    }
    .hero h1{
      margin: 10px 0 6px;
      font-size: 34px;
      line-height: 1.05;
      color: var(--accent);
      font-weight: 900;
    }
    .hero h1 .emoji{filter:saturate(1.1)}
    .hero .sub{
      color: var(--muted);
      font-weight: 700;
      font-size: 15px;
      margin-top: 2px;
    }

    /* back button (–∫–æ–≥–¥–∞ –≤–Ω—É—Ç—Ä–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏) */
    .bar{
      display:flex;
      align-items:center;
      justify-content: space-between;
      gap: 12px;
      margin: 8px 0 10px;
    }
    .back{
      display:inline-flex;
      align-items:center;
      gap: 10px;
      padding: 12px 16px;
      border-radius: 14px;
      background: var(--btnGrad);
      color:#fff;
      border:0;
      font-weight:800;
      cursor:pointer;
      box-shadow: var(--shadow);
    }
    .back.hidden{display:none}

    .sectionTitle{
      display:flex; align-items:center; gap:10px;
      color: var(--accent);
      font-weight: 900;
      font-size: 30px;
      margin: 6px 0 10px;
    }
    .sectionTitle.hidden{display:none}

    /* Category buttons */
    .catList{
      display:grid;
      gap: 14px;
      margin-top: 10px;
    }
    .catBtn{
      width: 100%;
      padding: 20px 18px;
      border-radius: 18px;
      background: var(--btnGrad);
      color:#fff;
      border:0;
      font-weight: 900;
      font-size: 20px;
      cursor:pointer;
      box-shadow: var(--shadow);
      transition: transform .08s ease, filter .08s ease;
    }
    .catBtn:active{transform: scale(.99); filter: brightness(.98)}
    .catHint{
      text-align:center;
      color: var(--accent);
      font-weight: 900;
      font-size: 22px;
      margin: 12px 0 2px;
    }

    /* Products grid */
    .grid{
      display:grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 14px;
      margin-top: 12px;
    }
    .grid.hidden{display:none}
    .card{
      background: var(--card);
      border-radius: 18px;
      border: 2px solid rgba(123,92,79,.28);
      box-shadow: 0 12px 24px rgba(38,16,10,.12);
      overflow:hidden;
      display:flex;
      flex-direction:column;
      min-height: 220px;
    }
    .thumb{
      height: 150px;
      background: linear-gradient(135deg, rgba(197,70,31,.12), rgba(123,42,24,.12));
      display:grid;
      place-items:center;
      font-size: 48px;
    }
    .cardBody{
      padding: 12px 12px 14px;
      display:flex;
      flex-direction:column;
      gap: 8px;
      flex:1;
    }
    .name{
      font-weight: 900;
      font-size: 16px;
      color: #2c1a12;
      line-height:1.15;
    }
    .price{
      font-weight: 1000;
      color: var(--accent);
      font-size: 18px;
      margin-top: auto;
    }
    .addRow{
      display:flex;
      gap: 10px;
      margin-top: 8px;
    }
    .miniBtn{
      flex:1;
      border-radius: 14px;
      border:0;
      padding: 10px 12px;
      font-weight: 900;
      cursor:pointer;
    }
    .miniBtn.primary{
      background: var(--btnGrad);
      color:#fff;
    }
    .miniBtn.ghost{
      background: transparent;
      border: 2px solid rgba(123,92,79,.35);
      color:#3a231a;
    }

    /* Floating cart button */
    .cartFab{
      position: fixed;
      right: 14px;
      bottom: 18px;
      display:flex;
      align-items:center;
      gap: 10px;
      padding: 14px 16px;
      border-radius: 999px;
      background: var(--btnGrad);
      color:#fff;
      border:0;
      box-shadow: var(--shadow);
      font-weight: 900;
      cursor:pointer;
      z-index: 6;
    }
    .badge{
      min-width: 24px;
      height: 24px;
      border-radius: 999px;
      background: rgba(255,255,255,.18);
      display:grid;
      place-items:center;
      font-size: 13px;
      font-weight: 900;
      padding: 0 8px;
    }

    /* Modal */
    .overlay{
      position: fixed;
      inset:0;
      background: rgba(0,0,0,.35);
      display:none;
      align-items:center;
      justify-content:center;
      padding: 18px;
      z-index: 20;
    }
    .overlay.show{display:flex}
    .modal{
      width: min(520px, 96vw);
      background: var(--panel);
      border-radius: 16px;
      border: 2px solid rgba(123,92,79,.35);
      box-shadow: 0 20px 40px rgba(0,0,0,.25);
      overflow:hidden;
    }
    .modalHead{
      display:flex;
      align-items:center;
      justify-content:space-between;
      padding: 14px 14px;
      border-bottom: 1px solid rgba(123,92,79,.25);
    }
    .modalHead h3{
      margin:0;
      font-size: 20px;
      font-weight: 1000;
    }
    .closeX{
      width: 36px; height:36px;
      border-radius: 12px;
      border:0;
      cursor:pointer;
      background: rgba(0,0,0,.08);
      font-weight: 1000;
    }
    .modalBody{
      padding: 14px;
    }
    .empty{
      text-align:center;
      color: var(--accent);
      font-weight: 1000;
      margin: 6px 0 10px;
    }
    .total{
      text-align:center;
      font-weight: 1000;
      font-size: 22px;
      margin: 6px 0 10px;
    }
    .cartList{
      display:flex;
      flex-direction:column;
      gap:10px;
      margin: 12px 0 12px;
    }
    .cartItem{
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:10px;
      padding: 10px 10px;
      background: rgba(255,255,255,.55);
      border-radius: 14px;
      border: 1px solid rgba(123,92,79,.25);
    }
    .cartItem .left{
      display:flex;
      flex-direction:column;
      gap:2px;
    }
    .cartItem .left b{font-weight:1000}
    .cartItem small{color: var(--muted); font-weight: 800}
    .qty{
      display:flex;
      align-items:center;
      gap: 8px;
    }
    .qty button{
      width: 32px; height:32px;
      border-radius: 10px;
      border:0;
      background: rgba(0,0,0,.08);
      font-weight: 1000;
      cursor:pointer;
    }
    .modalActions{
      display:flex;
      gap: 12px;
      justify-content:center;
      padding: 12px 14px 16px;
      border-top: 1px solid rgba(123,92,79,.25);
    }
    .actionBtn{
      min-width: 160px;
      border-radius: 12px;
      border:0;
      padding: 12px 14px;
      font-weight: 1000;
      cursor:pointer;
    }
    .actionBtn.gray{
      background: #80858b;
      color:#fff;
    }
    .actionBtn.orange{
      background: var(--btnGrad);
      color:#fff;
    }

    /* Responsive */
    @media (min-width: 760px){
      .catList{grid-template-columns: repeat(2, 1fr);}
      .grid{grid-template-columns: repeat(3, 1fr);}
    }
    @media (min-width: 980px){
      .grid{grid-template-columns: repeat(4, 1fr);}
    }
  </style>
</head>

<body>
  <div class="topbar">
    <div class="x" title="–ó–∞–∫—Ä—ã—Ç—å">‚úï</div>
    <div class="title">üü™ <span>darksurvival</span></div>
    <div class="actions" title="–ú–µ–Ω—é">
      <span class="dot"></span><span class="dot"></span><span class="dot"></span>
    </div>
  </div>

  <div class="wrap">
    <div class="hero">
      <div style="display:flex;justify-content:center;gap:10px;align-items:center;">
        <button class="back hidden" id="backBtn">‚Üê –ù–∞–∑–∞–¥</button>
      </div>
      <h1><span class="emoji">üü™</span> –ú–∞–≥–∞–∑–∏–Ω<br/>DarkSurvival</h1>
      <div class="sub">–ü–æ–∫—É–ø–∫–∏ / –¥–æ–Ω–∞—Ç / —É—Å–ª—É–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞</div>
    </div>

    <div id="home">
      <div class="catHint">–í—ã–±–µ—Ä–∏—Ç–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—é:</div>
      <div class="catList" id="catList"></div>
    </div>

    <div class="sectionTitle hidden" id="sectionTitle">–ö–∞—Ç–µ–≥–æ—Ä–∏—è</div>
    <div class="grid hidden" id="grid"></div>
  </div>

  <button class="cartFab" id="cartBtn">
    üõí –ö–æ—Ä–∑–∏–Ω–∞ <span class="badge" id="cartCount">0</span>
  </button>

  <!-- Cart Modal -->
  <div class="overlay" id="overlay">
    <div class="modal" role="dialog" aria-modal="true">
      <div class="modalHead">
        <h3>üõí –í–∞—à–∞ –∫–æ—Ä–∑–∏–Ω–∞</h3>
        <button class="closeX" id="closeCart">‚úï</button>
      </div>
      <div class="modalBody">
        <div class="empty" id="emptyText">–ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞</div>

        <div class="cartList" id="cartList"></div>

        <div class="total" id="totalText">–ò—Ç–æ–≥–æ: 0‚Ç∏</div>
      </div>
      <div class="modalActions">
        <button class="actionBtn gray" id="closeBtn">–ó–∞–∫—Ä—ã—Ç—å</button>
        <button class="actionBtn orange" id="checkoutBtn">–û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑</button>
      </div>
    </div>
  </div>

  <script>
    // === –î–ê–ù–ù–´–ï (–º–µ–Ω—è–π –ø–æ–¥ —Å–≤–æ–π —Å–µ—Ä–≤–µ—Ä) ===
    const CATEGORIES = [
      { id: "ranks",  title: "–ü—Ä–∏–≤–∏–ª–µ–≥–∏–∏", icon: "üëë" },
      { id: "cases",  title: "–ö–µ–π—Å—ã",       icon: "üéÅ" },
      { id: "items",  title: "–ü—Ä–µ–¥–º–µ—Ç—ã",    icon: "üß∞" },
      { id: "boosts", title: "–ë—É—Å—Ç—ã",       icon: "‚ö°" },
      { id: "keys",   title: "–ö–ª—é—á–∏",       icon: "üîë" },
      { id: "services", title:"–£—Å–ª—É–≥–∏",     icon: "üõ†Ô∏è" }
    ];

    const PRODUCTS = {
      ranks: [
        { id:"vip", name:"VIP", price: 1500, emoji:"üü©" },
        { id:"platinum", name:"PLATINUM", price: 3500, emoji:"‚¨ú" },
        { id:"void", name:"VOID", price: 5500, emoji:"üü™" },
        { id:"luxe", name:"LUXE", price: 8500, emoji:"üíé" },
        { id:"dark", name:"DARK", price: 12500, emoji:"üåë" },
      ],
      cases: [
        { id:"case_basic", name:"–ö–µ–π—Å: Starter", price: 900, emoji:"üéÅ" },
        { id:"case_lucky", name:"–ö–µ–π—Å: Lucky", price: 1900, emoji:"üçÄ" },
        { id:"case_ultra", name:"–ö–µ–π—Å: Ultra", price: 3900, emoji:"üî•" },
        { id:"case_void", name:"–ö–µ–π—Å: Void", price: 6900, emoji:"üü£" },
      ],
      items: [
        { id:"elytra", name:"–≠–ª–∏—Ç—Ä—ã (1 —à—Ç.)", price: 1200, emoji:"ü™Ω" },
        { id:"totem", name:"–¢–æ—Ç–µ–º (3 —à—Ç.)", price: 900, emoji:"üóø" },
        { id:"shulker", name:"–®–∞–ª–∫–µ—Ä (1 —à—Ç.)", price: 700, emoji:"üì¶" },
        { id:"gapples", name:"–ó–æ–ª–æ—Ç—ã–µ —è–±–ª–æ–∫–∏ (8 —à—Ç.)", price: 1000, emoji:"üçè" },
      ],
      boosts: [
        { id:"money_30", name:"x2 –î–µ–Ω—å–≥–∏ ‚Äî 30 –º–∏–Ω", price: 800, emoji:"üí∏" },
        { id:"money_120", name:"x2 –î–µ–Ω—å–≥–∏ ‚Äî 2 —á–∞—Å–∞", price: 2200, emoji:"üí∞" },
        { id:"xp_30", name:"x2 –û–ø—ã—Ç ‚Äî 30 –º–∏–Ω", price: 700, emoji:"üìà" },
        { id:"xp_120", name:"x2 –û–ø—ã—Ç ‚Äî 2 —á–∞—Å–∞", price: 2000, emoji:"üß†" },
      ],
      keys: [
        { id:"key_starter", name:"–ö–ª—é—á: Starter", price: 400, emoji:"üîë" },
        { id:"key_lucky", name:"–ö–ª—é—á: Lucky", price: 900, emoji:"üóùÔ∏è" },
        { id:"key_ultra", name:"–ö–ª—é—á: Ultra", price: 1600, emoji:"üîê" },
        { id:"key_void", name:"–ö–ª—é—á: Void", price: 2900, emoji:"üßø" },
      ],
      services: [
        { id:"unban", name:"–†–∞–∑–±–∞–Ω", price: 5000, emoji:"üßæ" },
        { id:"nick", name:"–°–º–µ–Ω–∞ –Ω–∏–∫–∞", price: 1500, emoji:"‚úçÔ∏è" },
        { id:"color", name:"–¶–≤–µ—Ç–Ω–æ–π –Ω–∏–∫", price: 2500, emoji:"üåà" },
        { id:"pvp", name:"–°–Ω—è—Ç–∏–µ PvP-–º–µ—Ç–∫–∏", price: 2000, emoji:"üõ°Ô∏è" },
      ]
    };

    // === UI / –õ–û–ì–ò–ö–ê ===
    const catListEl = document.getElementById("catList");
    const gridEl = document.getElementById("grid");
    const sectionTitleEl = document.getElementById("sectionTitle");
    const backBtn = document.getElementById("backBtn");
    const homeEl = document.getElementById("home");

    const overlay = document.getElementById("overlay");
    const cartBtn = document.getElementById("cartBtn");
    const closeCart = document.getElementById("closeCart");
    const closeBtn = document.getElementById("closeBtn");
    const checkoutBtn = document.getElementById("checkoutBtn");
    const cartCountEl = document.getElementById("cartCount");
    const cartList = document.getElementById("cartList");
    const emptyText = document.getElementById("emptyText");
    const totalText = document.getElementById("totalText");

    let currentCategory = null;
    const cart = new Map(); // productId -> { product, qty }

    function money(n){
      return new Intl.NumberFormat("ru-RU").format(n) + "‚Ç∏";
    }

    function renderCategories(){
      catListEl.innerHTML = "";
      CATEGORIES.forEach(c => {
        const btn = document.createElement("button");
        btn.className = "catBtn";
        btn.textContent = c.title;
        btn.addEventListener("click", () => openCategory(c.id));
        catListEl.appendChild(btn);
      });
    }

    function openCategory(catId){
      currentCategory = catId;

      // header state
      homeEl.style.display = "none";
      backBtn.classList.remove("hidden");
      sectionTitleEl.classList.remove("hidden");
      gridEl.classList.remove("hidden");

      const c = CATEGORIES.find(x => x.id === catId);
      sectionTitleEl.textContent = `${c?.icon || "üì¶"} ${c?.title || "–ö–∞—Ç–µ–≥–æ—Ä–∏—è"}`;

      renderProducts(catId);
    }

    function goHome(){
      currentCategory = null;
      homeEl.style.display = "";
      backBtn.classList.add("hidden");
      sectionTitleEl.classList.add("hidden");
      gridEl.classList.add("hidden");
      gridEl.innerHTML = "";
    }

    function renderProducts(catId){
      const list = PRODUCTS[catId] || [];
      gridEl.innerHTML = "";

      list.forEach(p => {
        const card = document.createElement("div");
        card.className = "card";

        const thumb = document.createElement("div");
        thumb.className = "thumb";
        thumb.textContent = p.emoji || "üß±";

        const body = document.createElement("div");
        body.className = "cardBody";

        const name = document.createElement("div");
        name.className = "name";
        name.textContent = p.name;

        const price = document.createElement("div");
        price.className = "price";
        price.textContent = money(p.price);

        const row = document.createElement("div");
        row.className = "addRow";

        const add = document.createElement("button");
        add.className = "miniBtn primary";
        add.textContent = "–í –∫–æ—Ä–∑–∏–Ω—É";
        add.addEventListener("click", () => addToCart(p));

        const info = document.createElement("button");
        info.className = "miniBtn ghost";
        info.textContent = "–ü–æ–¥—Ä–æ–±–Ω–µ–µ";
        info.addEventListener("click", () => {
          alert(p.name + "\\n–¶–µ–Ω–∞: " + money(p.price) + "\\n\\n(–¢—É—Ç –ø–æ—Ç–æ–º –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –∫—Ä–∞—Å–∏–≤—É—é –∫–∞—Ä—Ç–æ—á–∫—É/–æ–ø–∏—Å–∞–Ω–∏–µ)");
        });

        row.appendChild(info);
        row.appendChild(add);

        body.appendChild(name);
        body.appendChild(price);
        body.appendChild(row);

        card.appendChild(thumb);
        card.appendChild(body);
        gridEl.appendChild(card);
      });
    }

    function addToCart(product){
      const existing = cart.get(product.id);
      if(existing) existing.qty += 1;
      else cart.set(product.id, { product, qty: 1 });
      updateCartBadge();
    }

    function updateCartBadge(){
      let count = 0;
      cart.forEach(v => count += v.qty);
      cartCountEl.textContent = count;
    }

    function openCart(){
      renderCart();
      overlay.classList.add("show");
    }
    function closeCartModal(){
      overlay.classList.remove("show");
    }

    function renderCart(){
      cartList.innerHTML = "";
      let total = 0;

      if(cart.size === 0){
        emptyText.style.display = "";
      } else {
        emptyText.style.display = "none";
      }

      cart.forEach(({product, qty}) => {
        total += product.price * qty;

        const item = document.createElement("div");
        item.className = "cartItem";

        const left = document.createElement("div");
        left.className = "left";
        left.innerHTML = `<b>${product.name}</b><small>${money(product.price)} –∑–∞ —à—Ç.</small>`;

        const right = document.createElement("div");
        right.className = "qty";

        const minus = document.createElement("button");
        minus.textContent = "‚àí";
        minus.addEventListener("click", () => {
          const v = cart.get(product.id);
          v.qty -= 1;
          if(v.qty <= 0) cart.delete(product.id);
          updateCartBadge();
          renderCart();
        });

        const q = document.createElement("b");
        q.textContent = qty;

        const plus = document.createElement("button");
        plus.textContent = "+";
        plus.addEventListener("click", () => {
          cart.get(product.id).qty += 1;
          updateCartBadge();
          renderCart();
        });

        right.appendChild(minus);
        right.appendChild(q);
        right.appendChild(plus);

        item.appendChild(left);
        item.appendChild(right);
        cartList.appendChild(item);
      });

      totalText.textContent = "–ò—Ç–æ–≥–æ: " + money(total);
    }

    // Checkout: –ø–æ–∫–∞ –ø—Ä–æ—Å—Ç–æ –∑–∞–≥–ª—É—à–∫–∞
    checkoutBtn.addEventListener("click", () => {
      if(cart.size === 0){
        alert("–ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞ üôÇ");
        return;
      }
      // –¢—É—Ç –ø–æ—Ç–æ–º –ø–æ–¥–∫–ª—é—á–∏–º Telegram WebApp / –æ—Ç–ø—Ä–∞–≤–∫—É –∑–∞–∫–∞–∑–∞ –≤ –±–æ—Ç.
      const lines = [];
      let total = 0;
      cart.forEach(({product, qty}) => {
        total += product.price * qty;
        lines.push(`${product.name} x${qty} = ${money(product.price * qty)}`);
      });
      alert("–ó–∞–∫–∞–∑ —Å—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω:\\n\\n" + lines.join("\\n") + "\\n\\n–ò—Ç–æ–≥–æ: " + money(total));
    });

    // Events
    backBtn.addEventListener("click", goHome);
    cartBtn.addEventListener("click", openCart);
    closeCart.addEventListener("click", closeCartModal);
    closeBtn.addEventListener("click", closeCartModal);
    overlay.addEventListener("click", (e) => {
      if(e.target === overlay) closeCartModal();
    });

    // Init
    renderCategories();
    goHome();
    updateCartBadge();
  </script>
</body>
  </html>
